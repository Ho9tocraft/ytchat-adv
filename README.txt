####################################
##               ゆとチャadv.     ##
##          by ゆとらいず工房     ##
##    https://yutorize.2-d.jp     ##
####################################

### 設置の手順 #######################################################################################
 1. config.cgi.defaultのファイル名をconfig.cgiに変更する（.defaultを消す）

 2. config.cgiを開いて、管理用パスなどを設定する
 
 3. サーバーによっては、index.cgiの一行目を書き換える。
    (#!/usr/bin/perl から #!/usr/local/bin/perl など。)

 4. ゆとチャのファイルをすべてサーバーにアップする

 5. index.cgiのパーミッション（属性）を<705>または<755>に変更する
   （サーバーによっては<700>などの可能性もアリ）

 6. ブラウザからチャットのTOPページ(http://○○○/ytchat-adv/)へアクセスして
    問題なく表示されれば設置完了

### ファイル構成 #####################################################################################
  <>内は一般的なパーミッション設定です。基本的に、「index.cgi」以外は設定する必要はありません。

 /ytchat-adv <705> このディレクトリ（フォルダ）名は変更可
  |
  |- index.cgi          <705> 基本CGI。パーミッション（属性）設定必須。
  |- config.cgi.default <604> 設定ファイル。ファイル名を「必ず」 config.cgi に変更してください
  |
  |- /lib <705> ライブラリ格納ディレクトリ
  |  |
  |  |- /pl
  |  |  |
  |  |  |- config-default.pl <604> デフォルト設定格納ファイル
  |  |  |- *****.pl          <604> その他処理ライブラリ
  |  |
  |  |- /js
  |  |- /css
  |  |- /html
  |
  |- /room   <705> 部屋データ格納ディレクトリ
  |- /logs   <705> 過去ログデータ格納ディレクトリ
  |- /rtable <705> ランダムテーブルファイル格納ディレクトリ
  |- /module <705> 同梱Perlモジュール格納ディレクトリ


### 更新履歴 #########################################################################################
# ver.0.09.3 - 2020-01-03 --------------------------------------------------
- 水平線の濃さとマージンを調整
- メモ更新メッセージが最初の読み込み時に成型されていない不具合修正
- メモの縦幅が一番長いメッセージに合わせて固定される不具合修正
- メモのフォントサイズをやや小さく変更
- ダブルクロスのダイスコード「ER」「RE」が正常に機能していなかった不具合修正
- 再読み込み時（再入室時）、変更したフォントが一部適用されていない不具合修正

# ver.0.09.2 - 2019-12-25 --------------------------------------------------
- 発言欄への入力（打鍵）時の処理を軽量化
- 入力フォームの色を変更
- カラーピッカーを変更

# ver.0.09.1 - 2019-12-20 --------------------------------------------------
- タブ文字を2つ以上含んだ発言をするとログが読み取れなくなる不具合修正
- 同タイミングで同ユニットのステータスを変更した際の挙動を変更
- Ctrl+↑で前回発言が取得されてしまう不具合修正
- 発言内の<br>タグが有効になるよう変更
- ダイスコードを末尾に記述した際、発言の一部が消えることがある不具合修正
- - 部屋一覧に現在のログサイズを表示

# ver.0.09.0 - 2019-12-13 --------------------------------------------------
- ダイスコードを発言の末尾に書いてもダイスが振れるように変更（内蔵ダイスのみ）
- ソードワールド2.xの内蔵ダイスにおいて、「威力20C値10」など日本語ベースでの記述が出来るように追加
- レイアウトを複数から選んで変更できる項目を「その他設定」に追加（スマホ未対応）
- HPが負の値になった時にHPバーが伸びていた不具合を修正
- 発言に含まれるタブ文字・半角スペースをそのまま表示するように修正
- 使用しているPerlモジュールを一部同梱（使えなかったサーバーでも使えるように）

# ver.0.08.1 - 2019-12-06 --------------------------------------------------
- タブ文字を含んだ発言をするとログが読み取れなくなる不具合修正

# ver.0.08.0 - 2019-12-06 --------------------------------------------------
- チャットログのフォントを変更する項目を「その他設定」に追加
- 一部表示フォントを変更（Windows10）
- ステータスリモコン欄に他ユニットのリモコン欄を追加できるボタン追加
- チェックボタンの見た目変更
- ユニット削除ボタン追加
- メイン発言欄下のテキスト装飾ボタンのレイアウトを変更
- メイン発言欄下にチェックボタン追加
- ステータスの値が「数値/数値」の時、ゲージを表示する仕様追加
- ステータスの名前が「侵蝕」の時、ゲージを表示する仕様追加
- config.cgiで部屋ごとに過去ログの保存先を設定出来るように変更
- 新規発言はフェードイン表示するように変更

# ver.0.07.0 - 2019-11-30 --------------------------------------------------
- ステータス現在値を変更した際、最大値を上回っていた場合、最大値と同値になるように変更
- ステータス変更コマンドの入力の末尾に「!」を入力しておくと、上記の処理を回避できる（現在値が最大値を突破できる）仕様を追加
- ダブルクロスの内蔵ダイスに侵蝕ロール（シーン登場・衝動判定）を追加（コマンド「ER」）
- ダブルクロスの内蔵ダイスにリザレクトのロールを追加（コマンド「RE」）
- 改行による発言欄の縦幅増加時、チャット欄をスクロールする仕様追加（FireFox未対応）
- 共有メモ更新時のログに、メモ内容をの一部も追加
- ソードワールド2.xの内蔵ダイスに、出目を片方固定する仕様追加（記述「$n4」など）
- 名前欄の高さ限界を設定
- ソードワールド2.xの時、最大出目と最低出目は色を変化させる仕様追加
- 「計算式=」で四則演算が出来る仕様追加
- 自分の発言はワード強調されないように変更
- ヘルプに項目追加

# ver.0.06.0 - 2019-11-28 --------------------------------------------------
- 秘話機能追加
- 設置者が追加できるランダム表機能追加
- 上記のサンプルとしてじゃんけん表追加
- 設置者が追加できるテキスト置換定義設定追加
- 上記のサンプルとしてSW2向けのアイコン等追加
- ワンクリックでミュートにするボタン追加
- ヘルプのテキスト追加
- ゲームがDX3の時、「ET」で感情表、「HC」でハプニングチャートが振れるよう追加
- 入室者・人数を表示
- 部屋リセット時に作成する過去ログのファイル名をログの最初の日付を参照するように変更
- 過去ログの一覧を昇順ソートするように変更
- 威力表を振った時、クリティカルを20回で一度止めるように修正
- 見学の時はワード強調しないように修正
- 見学でもメモが開けるように修正
- 使わなくなってたファイル削除

# ver.0.06.2 - 2019-11-24 --------------------------------------------------
- 見学入室でログが正常に読み込まれない不具合修正

# ver.0.06.1 - 2019-11-24 --------------------------------------------------
- ヘルプの記述漏れ修正
- ログを開いた際のエラー修正

# ver.0.05.0 - 2019-11-24 --------------------------------------------------
- ソードワールド2.xの内蔵ダイスをグレイテストフォーチュンとアビスカース「難しい」に対応
- ソードワールド2.xの内蔵ダイスの必殺効果の記号に「!」を追加
- ソードワールド2.xの内蔵ダイスでまとめ振りが出来るように（コード末尾に:n）
- BCDice-APIを利用可能に
- config.cgiの部屋設定の記述変更（タブの設定）
- 部屋ごとにステータス設定可能に
- 強調ワードを設定できるように
- 強調ワードとレディチェックの時は別の着信SEを鳴らすように
- 音量ボリューム項目を追加
- 入室中にログリセット処理をすると処理した人が退室しない不具合修正
- ステータスの減算処理（@HP-1など）が機能しない不具合修正
- 発言着信SEが余分に鳴ることがある不具合（多分）修正

# ver.0.04.0 - 2019-11-22 --------------------------------------------------
- 最新50行以前に入れたチェックが反映されない不具合修正
- 入室中にページ更新等をしても個人メモがリセットされない処理追加
- 入室時にユニットを作成するかどうかのチェックを追加
- 退室時にユニットを削除する処理を停止
- 名前欄の書式変更（<>を省略）
- 名前の追加時、色指定を省略するとランダムな色を設定するように
- 過去ログにおいてタブの表示／非表示を切り替えられるように
- スマホ閲覧のレイアウト暫定改善
- Ctrl+↑↓キーで名前切り替え、Ctrl+←→キーでタブ切り替えを可能に
- 発言の先頭に「名前@」を記述することで任意の名前で発言できるように
- ダイス欄左のマークをクリックすることで送信時に欄のタイプを変更するように
- チャット着信SEを追加

# ver.0.03.0 - 2019-11-20 --------------------------------------------------
- 入室中にページ更新等をしてもチャットパレットがリセットされない処理追加
- 共有メモ追加

# ver.0.02.0 - 2019-11-18 --------------------------------------------------
- ステータス更新時に余分なタグの切れ端が混ざり込んでいたのを修正
- 部屋一覧のタイトルバーが過去ログになってたのを修正
- ユニット追加の項目に名前欄にも追加するチェックを追加

# ver.0.01.1 - 2019-11-18 --------------------------------------------------
- Perlのパスのデフォルトの記述を変更
- 一定以上のPerlのバージョンでエラーが出る不具合修正

# ver.0.01.0 - 2019-11-17 --------------------------------------------------
- リリース


### 素材借用元 #######################################################################################
# チャットSE
- 効果音ラボ : https://soundeffect-lab.info/
